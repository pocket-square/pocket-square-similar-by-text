sudo: required

language: python

services:
- docker

script:
- docker login -e="$DOCKER_EMAIL" -u="$DOCKER_USERNAME" -p="$DOCKER_PASSWORD"

after_script:
- export DOCKER_REPO=pocketsquare/pocket-square-similar-by-text
- export TAG=`if [ "$TRAVIS_BRANCH" == "master" ]; then echo "latest"; else echo $TRAVIS_BRANCH | tr '/' '-' ; fi`
- docker build -t $DOCKER_REPO:travis-$TRAVIS_BUILD_NUMBER .
- docker tag $DOCKER_REPO:travis-$TRAVIS_BUILD_NUMBER $DOCKER_REPO:$TAG
- docker push $DOCKER_REPO

env:
  global:
  - secure: bA+rn5OxLL3ccMu/tP0BQz4qjutXEH0JucnTLNhLIwgDk0Zp+iIhF6vOmxcWY5Uf7jUP7TxS7r7sIZOeeFVaMVlt3Ce1++MqE/GiQCco980tRwm4cZrHIYBdlhxBVXbyCcWupAZk/AYjgGif4YyxD6hrWj6e8CUlJIfofTKfHItNRavQ04ReJwZOqWIu0zaZnmj7pXSrCdOHJtBaijVI7ATsOgVg92cqTurRLxAR7AIILVD4cLBppY/WECME23EtcxuLtPO2kEZ+JX8dm/x4HCcbZJaogTffL9HL9D7VCDnQxR/bn8suLhOFYTWlqgM0c5OgcgpLtrk8ocgV+WPUtGAHIroRHVEFUdmnNAFEtmuF1xGxfll+xwKK+QItykUR7mxKbOVIKh3SXuaO0lHWGRHBoTyOirNWB4Mw7VkIV+dV/V//Hrxh9a6s3VDLp/9v3e+cfMmpI/BbTkSTp3lRmqSRL6evrOYyfBh+T6tMHxYbnttAKrSPhqX/LrnSTdrrMIoRLJmXRnIYHqrhDqamuyBiR2ZZuJEs4qOdkmdrq3wvS7Rsnh1D0JWb8fTQM328zVMUisWE8EcOsPq7PjBm+PZQVOv/jNVnyxbTklcQg69khZyouVubcD+R0LYt4iCCVEasUxTp2nlz5XYU2ul9mWBkBjA36OJI4JVVb1vZo1o=
  - secure: VMuI9x3vFR5eLweVOYoxmG8oHEcwCbk9TW5Nrsq1YD87U0CnJjBXr4CV1cDpFtMfhlHePJ83Scr/0tro2ti37IQ8aCzvh6D+ePNM+SoJq1NN7tXXAkAa8eEbkM+HlIYW70xMotf6Pg9mkXZZA6VtLAnJg8Tb7FPqjl8uYrGchTI3IdLc9rL4kZHqFZBKqk9v8HXwkPdpvLXNqzGnnCr7sXA5hJ2HqETieirDFBltSzyMKu3SsNeHNxSew7SziLVknHMbtXsOFSzGFwK9yEs7Ux64EV38xr3xsE3MsJVziZtoxEWwMq6rHxPbzhetYsgQxOHJYQrKWFFi+Jr+Z901lbGqt6tF47O9dokzuyLeWkHtTXt/eHHwbiFNLDfMJzBf6w685qkAbM4kf4hpx9t7tQ34yIUf9UvVkTZS1utA+OtcsKh1OyAg0J5x5Wbd7u79LE+hYzky2KGgYkJ/Ct5jdloTXZoBAHAk6WexPZZ84FooGI8qGYgQVa0mvWeI3+kp79IQkY1FpM0Y5zv8QhNa7nI0TfxHwC5zbD0SuxCM7eGY85C1rC6Ow8bmXVVlOQp/Om8bNDPSXFRIY0Z1xX24PBACepVdEPwjo7XVmIr6Odw+/HfC41Y54ZAxvHpbC1D9qfZIfrL9y8RvUzIof7Wni8/R7lAy7xIJU0P89M+6yL0=
  - secure: S8ipI8kN2cJQFkqhBXkkOIbeYdgd1rvm1WDDlsI2wySwKAzHw0+HS7shFZzXCiBtpZuxGQw2zaY+xvgbP03llpUQ4zQd0njbNeCMSHf4q033ODsMplB7/dF+UuULnu3OWiCQEFVoU/q75RhGkYQbCh/rjxp37PKIxrMd+uPVgIkI6P3Yp2O7F3jo6/YOvQiJiXEPV24y59PkVvaTESP9uhwkXC4FHVtX7OVFNA14rcKAOXnn7+G+8YC9osl39v6W5eVMuf0WYV9PzTTCSIJAJDkx74/lVpy9w/j1BsPusX5TiB0fEcTQYEEvj/cuv9TNVnWzYc8+3RsRGiX6gliR5PTyhZGrv3g0nOtrk3z1cxzZ8d4Uu8WxqXvfLKhVn85izF7PMbDvpgKRnxTkuMx8HtTgWnLml6/vlENvGDR8wGha/XHGlNKbRPoXr3Pk0usgwOW0zRj2/9cuPPcob6hmBE/jdkGPOPf00o0nqIcy7KwAnWaaccNfQU11Lpjk61y5MJULYXQr+bec1b6WnD6NJvKXjJFAoNAi9JPIGghn5yvaZ8AL/9fnhdPt4L20qjeiOjDByY7HSNCTJ/eIjXY/aQNvcoCBwCb1c0uF2CCf367MKf4UWnw8qrmq8vyFQ1CjQqw6FMwHbkL12rXuRdqbb4BUxQ9z8uuPAfB7Gh82raI=
